{{ dump(lesson_series) }}
{{ dump(tableformats) }}
<style>
 	th, td {
    	border: 1px solid black;
     	border-collapse: collapse;
   	} 
   	th {
   		font-size: .7em;
   	}
	.rotate {
	  text-align: center;
	  white-space: nowrap;
	  vertical-align: middle;
	  width: 1.5em;
	}
	.rotate div {
	     -moz-transform: rotate(-90.0deg);  /* FF3.5+ */
	       -o-transform: rotate(-90.0deg);  /* Opera 10.5 */
	  -webkit-transform: rotate(-90.0deg);  /* Saf3.1+, Chrome */
	             filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083);  /* IE6,IE7 */
	         -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0.083)"; /* IE8 */
	         margin-left: -10em;
	         margin-right: -10em;
	}
	.full_width tr td {
		display:block; 
     	width:100%;
     	clear:both;

	}
</style>
{# table starts here #}
<div class="panel panel-default">
    <div class="panel-heading">
        Context Classes
    </div>
    <!-- /.panel-heading -->
    <div class="panel-body">
        <div class="table-responsive">

        	{% set days_per_week = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'] %}

            <table  style="width:100%">

                <thead>
                    <tr>
                        <th id="day">Day</th>
                        <th id="class">Class</th>
                        {% for lesson_time in lesson_series %}
                        	<th id="activity_{{lesson_time|split('|')[1]}}">{{lesson_time|split('|')[0]}}</th>
                        {% endfor %}
                    </tr>
                </thead>

        		{% for day in days_per_week %}
                <tbody>
                    <tr style="height:150px;" class="success">
                        <td class="rotate"><div>{{day}}</div></td>
                        <td>
                        	<table class="table table-striped table-bordered table-hover">
                        		{% for class in classes %}
	                        		<tr id="class-{{class}}_day-{{day}}">
	                        			<td id="subject_">{{class}}</td>
	                        		</tr>
	                        	{% endfor %}
                        	</table>
                        </td>
                        {% for tableformat in tableformats %}
                        	{% if tableformat.activity == 'lesson' %}
		                        <td>
		                        	<table class="full_width table table-striped table-bordered table-hover">
		                        		{% for class in classes %}
			                        		<tr id="class-{{class}}_day-{{day}}_tblfmt-{{tableformat.id}}">
			                        			<td>Kisw{{class}}</td>
			                        		</tr>
			                        	{% endfor %}
		                        	</table>
		                        </td>
		                    {% else %}
		                        <td class="rotate" rowspan="5">
		                        	<div>{{tableformat.title}}</div>
		                        </td>
	                    	{% endif %}
                        {% endfor %}
                    </tr>
                </tbody>

        		{% endfor %}

            </table>
        </div>
        <!-- /.table-responsive -->
    </div>
    <!-- /.panel-body -->
</div>
{# table ends here #}
